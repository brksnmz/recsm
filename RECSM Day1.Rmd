---
title: 'RECSM: Quantitative Methods in Social Research'
author: "Burak Sonmez"
subtitle: Day 1 - 02 07 2025
output:
  pdf_document: default
  html_document:
    df_print: paged
urlcolor: blue
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```
---
**Please skim through all of the instructions before getting started.**

**Note: This document also walks you through installing R and RStudio.**

## 1. Install R
• Go to https://cran.r-project.org/

• Select “Download R for Windows”

• Click “install R for the first time”
 
• Click “Download R 4.0.3 for Windows”
 
• Select “Download R for (Mac) OS X”

• Click “R-4.0.3.pkg”

## 2. Install RStudio
• Go to https://www.rstudio.com/products/rstudio/download/

• Select “RStudio 1.3.1093 - Windows 7+ (64-bit)” for Windows users

• Select “RStudio 1.3.1093 - macOS 10.13+ (64-bit)" for Mac users

## 3. Problem set 1

**Step 1**: What is the result of summing all numbers from 1 to 250?

**Step 2**: Calculate the square root of 1500 and round it to the nearest possibility.

**Step 3**: For example, suppose the yearly number of MSc students at UPF during the period 2010 to 2020 is 75, 152, 230, 141, 292, 79, 211, 137, 156, and 111, respectively. What are the mean, the variance, and the standard deviation? 

$$ Hint: \sigma = \sqrt{\frac{\sum\limits_{i=1}^{n} \left(x_{i} - \bar{x}\right)^{2}} {n-1}}$$

## 4. Problem set 2

**Step 1**: First download the folder (RECSM workshop) on your computer 

**Step 2**: Create a new file called “day1.R” in your RECSM workshop folder and write all the solutions in it.

**Step 3**: Clear the workspace and set the working directory to your RECSM workshop folder.

**Step 4**: Load the Asylum dataset into your R environment and inspect the name of variables. The asylum data is about the perception of asylum seeker size in the UK.

Variable | Description
|-------|-------
asylum | How many do you think are asylum seekers from Syria out of every 100 asylees in Britain?
sex |  1 = male, 2 = female
age |  Age of respondent
news |  Do you normally read any daily morning newspaper at least three times a week?
religious |  	Do you regard yourself as belonging to any particular religion?
urban |  Population density, 4 categories (highest density is 4, lowest is 1)
hhincome | 	Income bands for household, high number = high HH income
partyid |  1 = Tories, 2 = Labour, 3 = SNP, 4 = Greens, 5 = Ukip, 6 = BNP, 7 = other

Table:  The Codebook

**Step 5**: What is the level of measurement for each variable in the Asylum dataset?

**Step 6**: Calculate the correct measure of central tendency for asylum, hhincome, news.

**Step 7**: Calculate the correct measure of dispersion for asylum, hhincome, news.

**Step 8**: How many respondents identify with the Labour?

**Step 9**: Calculate the variance and standard deviation of asylum for each party identification.

**Step 10**: Find the party identification of the oldest and youngest respondents.

**Step 11**: Find the 20th, 40th, 60th and 80th percentiles of age.

**Step 12**: Create a box plot for asylum grouped by the religious variable to show the difference between asylum for people who believe in any religion and people who do not.

**Step 13**:What is the mean of asylum for men and for women?

## 5. Problem set 3

**Step 1**: Using the Asylum dataset, please try to answer to what extent political differences explain perceptional biases regarding Syrian asylum seekers. 

**Step 2**: Report summary statistics of the variables (asylum, age, news, sex). Make sure that you define the variables of news and sex as a factor. 

**Step 3**: Explore the relationship between sex and asylum perception through a boxplot, using `ggplot`. You can customise your ggplot boxplot by adding more layers (e.g. labels, title, aesthetic specifications). Please state your interprations/observations from plotting.   

**Step 4**: Please conduct hypothesis testing to confirm whether the mean differences in asylum perception are statistically significant between male and female respondents. Hint: (T-test)  

• **Null Hypothesis**: The average perception of Syrian asylum seeker size is the same between male and female respondents

• **Alternative Hypothesis**: The average perception of Syrian asylum seeker size differs between different sex categories.


## Solutions for problem sets

```{r prob1, include=TRUE, echo=TRUE}
#Remove objects from the enviroment
rm(list=ls())
#Set your working directory
setwd("~/Downloads/RECSM workshop")

#1)
sum_1_to_250 <- seq(1,250, 1)
sum_results <- sum(sum_1_to_250)
sum_results

#2)
round(sqrt(1500))

#3)
msc <- c(75, 152, 230, 141, 292, 79, 211, 137, 156, 111)
mean(msc)
var(msc)
sqrt(var(msc))
sqrt( sum( (msc - mean(msc))^2 /(length(msc)-1)))
sd(msc)
```

```{r prob2, include=TRUE, echo=TRUE}
load("asylum_data.RData")
names(asy)
#base R solution

#correct measure of central tendency for asylum, hhincome, news
mean(asy$asylum)
mean(asy$hhincome)
mean(asy$news)

##correct measure of dispersion for asylum, hhincome, news
sd(asy$asylum)
sd(asy$hhincome)
mean(asy$news)

##Forcing R not to use exponential/scientific notation
options(scipen = 999)

#How many respondents identify with the Labour?
asy$partyid <- factor(asy$partyid, labels = c("Tories", "Labour", "SNP", "Greens", "Ukip", "BNP", "other"))

#just look at the frequency table or filter it
table(asy$partyid)
length(which(asy$partyid=="Labour"))

#Calculate the variance and standard deviation of asylum for each party identification
# Tories
var(asy$asylum[asy$partyid=="Tories"])
sd(asy$asylum[asy$partyid=="Tories"])

#Find the party identification of the oldest and youngest respondents
# range for age
range(asy$age)
oldest <- which(asy$age == max(asy$age))
youngest <- which(asy$age == min(asy$age))

# party affiliation of those respondents
asy$partyid[oldest]
asy$partyid[youngest]

#Find the 20th, 40th, 60th and 80th percentiles of age
quantile(asy$age, c(.2, .4, .6, .8))

#a box plot for asylum grouped by the religious variable
boxplot( asylum ~ religious, data = asy)

#What is the mean of asylum for men and for women
mean(asy$asylum[asy$sex==2]) - mean(asy$asylum[asy$sex==1])
```

```{r package, include=TRUE, echo=TRUE}
##Instal the packages first if those packages are not installed before
library(ggplot2)
```

```{r prob3, include=TRUE, echo=TRUE}
#To what extent political differences explain perceptional biases regarding Syrian asylum seekers. 
by(asy$asylum, asy$partyid, summary)

#Summary statistics (asylum, age, news, sex)
asy$news <- factor(asy$news, labels = c("Don't read", "Read"))
asy$sex <- factor(asy$sex, labels = c("Male", "Female"))
summary(asy)

##Explore the relationship between sex and asylum perception through a boxplot, using `ggplot`

p <- ggplot(asy, 
            aes(x=factor(sex, labels = c("Male" , "Female"))
                , y=asylum, color=factor( sex , labels = c( "Male" , "Female")))) +
    geom_violin(trim=FALSE) + geom_boxplot(width=0.2, col = "black")
p
##Adding more layers (aesthetic specifications)
pt <- p + geom_jitter(shape=5, 
                      position=position_jitter(0.5)) +  
  labs(title="Perception Bias by Sex",x="Sex", 
       y = "Syrian Asylum Seekers Size (out of every 100 asylees)") + scale_x_discrete(
         labels=c("1" = "Male", "2" = "Female")) + 
  theme_minimal() + theme(legend.position = "none")
pt

##Observations:
#The distribution of perception bias for both sex groups are skewed.
#Female respondents have the highest bias in 1st/3rd quartiles and median.
#Male respondents have the lowest bias.

#Conducting T-test for Difference in Means and Hypothesis Testing
t.test(asy$asylum ~ asy$sex, mu = 0, alt = "two.sided", conf = 0.95)

#Interpretation
#In the following line you see the t-value, the degrees of freedom and the p-value. 
#Knowing the t-value and the degrees of freedom you can check in a table on t distributions 
#how likely you were to observe this data, if the null-hypothesis was true. 
#The p-value gives you this probability directly. For example, a p-value of 0.01 would mean 
#that the probability of seeing this data given that there is no difference in 
#asylum seekers size perception between sex groups in the population, is 1%. 
#In this case, our p-value is much smaller than this = 0.0000000001216!

#In the next line you see the 95% confidence interval because we specified conf=0.95. 
#If you were to take 100 samples and in each you checked the means of the two groups, 
#95 times the difference in means would be within the interval you see there.

#At the very bottom you see the means of the dependent variable by 
#the two groups of the independent variable. These are the means that we estimated above. 

```

